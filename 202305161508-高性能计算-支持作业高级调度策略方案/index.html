<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>高性能计算-支持作业高级调度策略方案 - 学习记录</title><meta name=Description content="这是我的网站描述"><meta property="og:title" content="高性能计算-支持作业高级调度策略方案"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/"><meta property="og:image" content="http://www.honghuiqiang.com/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-16T15:05:00+08:00"><meta property="article:modified_time" content="2023-05-16T15:05:00+08:00"><meta property="og:site_name" content="学习记录"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://www.honghuiqiang.com/logo.png"><meta name=twitter:title content="高性能计算-支持作业高级调度策略方案"><meta name=twitter:description content><meta name=application-name content="HHQ Records"><meta name=apple-mobile-web-app-title content="HHQ Records"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/images/zoro.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/><link rel=prev href=http://www.honghuiqiang.com/202305161521-%E8%AE%A1%E7%AE%97%E8%8A%82%E7%82%B9%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5%E6%96%B9%E6%A1%88/><link rel=next href=http://www.honghuiqiang.com/202305161550-iscsi-%E7%A3%81%E7%9B%98%E5%8D%B8%E8%BD%BD%E6%9C%89%E6%AE%8B%E7%95%99%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"高性能计算-支持作业高级调度策略方案","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/www.honghuiqiang.com\/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88\/"},"genre":"posts","wordcount":3029,"url":"http:\/\/www.honghuiqiang.com\/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88\/","datePublished":"2023-05-16T15:05:00+08:00","dateModified":"2023-05-16T15:05:00+08:00","publisher":{"@type":"Organization","name":""},"authors":[{"@type":"Person","name":"索隆不喝酒"}],"description":""}</script><script src=//instant.page/5.1.1 defer type=module integrity=sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq></script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"dark"==="light"||"dark"==="dark"||"dark"==="black"?(setTheme("dark"),saveTheme("dark")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=学习记录><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/series/>系列 </a><a class=menu-item href=/tags/>标签 </a><span class="menu-item delimiter"></span><a href=# class="menu-item language" title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" id=language-select-desktop onchange="location=this.value"><option value=/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ selected>简体中文</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# class="menu-item theme-select" title=切换主题><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=学习记录><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/series/ title>系列</a><a class=menu-item href=/tags/ title>标签</a><a href=# class="menu-item theme-select" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select>
</a><a href=# class=menu-item title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" onchange="location=this.value"><option value=/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ selected>简体中文</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#一需求背景>一、需求背景</a><ul><li><a href=#11-提出问题>1.1 提出问题</a></li><li><a href=#12-问题场景举例>1.2 问题场景举例</a></li><li><a href=#13-需求>1.3 需求</a></li></ul></li><li><a href=#二友商方案对比>二、*友商方案对比</a><ul><li><a href=#21-kubernetes-scheduler-扩展方式简单对比>2.1 Kubernetes Scheduler 扩展方式简单对比</a></li><li><a href=#22-友商已有解决方案对比>2.2 友商已有解决方案对比</a><ul><li><a href=#221-华为云---volcano>2.2.1 华为云 - Volcano</a></li><li><a href=#222-阿里云方案>2.2.2 阿里云方案</a></li></ul></li></ul></li><li><a href=#三整体方案架构组件架构>三、整体方案架构/组件架构</a><ul><li><a href=#31选用开源项目-volcano-以支持多种调度策略>3.1选用开源项目 Volcano 以支持多种调度策略</a></li><li><a href=#32-如何对接到我们的集群>3.2 如何对接到我们的集群</a></li></ul></li><li><a href=#四方案流程详细设计>四、方案流程详细设计</a><ul><li><a href=#41-流程主要分为三大部分-具体图示见-32>4.1 流程主要分为三大部分 （具体图示见 3.2）</a></li><li><a href=#42-该方案具体需要完成工作>4.2 该方案具体需要完成工作</a></li></ul></li><li><a href=#五api-接口设计参考>五、API 接口设计/参考</a><ul><li><a href=#51-volcanobackendhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisoperatorv1volcanobackend>5.1 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackend>VolcanoBackend</a></a></li><li><a href=#52-jobhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisbatchv1alpha1job>5.2 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/batch/v1alpha1/#Job>Job</a></a></li><li><a href=#53-commandhttp10253112156060pkgvolcanoshapispkgapisbusv1alpha1command>5.3 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/bus/v1alpha1/#Command>Command</a></a></li><li><a href=#54-numatopologyhttp10253112156060pkgvolcanoshapispkgapisnodeinfov1alpha1numatopology>5.4 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#Numatopology>Numatopology</a></a></li><li><a href=#55-queuehttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1queue>5.5 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#Queue>Queue</a></a></li><li><a href=#56-podgrouphttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1podgroup>5.6 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroup>PodGroup</a></a></li></ul></li><li><a href=#参考资料>*、参考资料</a></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">高性能计算-支持作业高级调度策略方案</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="author fas fa-user-circle fa-fw"></i><span class=screen-reader-text> </span><a href=http://www.honghuiqiang.com/authors/%E7%B4%A2%E9%9A%86%E4%B8%8D%E5%96%9D%E9%85%92>索隆不喝酒</a></span>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/openshift/><i class="far fa-folder fa-fw"></i>OpenShift</a></span>&nbsp;<span class=post-category>和</span>&nbsp;<span class=post-series>系列 <a href=/series/%E5%81%8F%E5%B7%A5%E4%BD%9C%E6%80%A7%E8%B4%A8%E8%AE%B0%E5%BD%95/><i class="far fa-list-alt fa-fw"></i>偏工作性质记录</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2023-05-16>2023-05-16</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2023-05-16>2023-05-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3029 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 7 分钟&nbsp;</div></div><div class="details series-nav open"><div class="details-summary series-title"><span>系列 - 偏工作性质记录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content series-content"><nav><ul><li><a href=/202305170654-%E9%9D%A2%E7%BB%8F%E6%94%B6%E9%9B%86/>面经收集</a></li><li><a href=/202305170617-%E4%B8%80%E4%BA%9B%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9%E8%AE%B0%E5%BD%95%E6%80%BB%E8%A7%88/>一些工作内容记录总览</a></li><li><a href=/202305161542-app-operator-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%E5%8C%96cdp/>App Operator 安装脚本化（cdp）</a></li><li><a href=/202305161550-iscsi-%E7%A3%81%E7%9B%98%E5%8D%B8%E8%BD%BD%E6%9C%89%E6%AE%8B%E7%95%99%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90/>iSCSI 磁盘卸载有残留的原因分析</a></li><li><span class=active>高性能计算-支持作业高级调度策略方案</span></li><li><a href=/202305161521-%E8%AE%A1%E7%AE%97%E8%8A%82%E7%82%B9%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5%E6%96%B9%E6%A1%88/>计算节点健康检查方案</a></li><li><a href=/202305161528-%E5%BA%94%E7%94%A8%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E6%96%B9%E6%A1%88/>应用备份恢复方案</a></li><li><a href=/202305161538-%E6%94%AF%E6%8C%81-xsky-%E5%AD%98%E5%82%A8/>支持 xsky 存储</a></li><li><a href=/202305161452-cke-%E5%AD%98%E5%82%A8%E6%8E%A5%E5%85%A5%E4%B8%AD%E4%BF%A1%E9%93%B6%E8%A1%8Cpoc/>cke 存储接入（中信银行poc）</a></li></ul></nav></div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#一需求背景>一、需求背景</a><ul><li><a href=#11-提出问题>1.1 提出问题</a></li><li><a href=#12-问题场景举例>1.2 问题场景举例</a></li><li><a href=#13-需求>1.3 需求</a></li></ul></li><li><a href=#二友商方案对比>二、*友商方案对比</a><ul><li><a href=#21-kubernetes-scheduler-扩展方式简单对比>2.1 Kubernetes Scheduler 扩展方式简单对比</a></li><li><a href=#22-友商已有解决方案对比>2.2 友商已有解决方案对比</a><ul><li><a href=#221-华为云---volcano>2.2.1 华为云 - Volcano</a></li><li><a href=#222-阿里云方案>2.2.2 阿里云方案</a></li></ul></li></ul></li><li><a href=#三整体方案架构组件架构>三、整体方案架构/组件架构</a><ul><li><a href=#31选用开源项目-volcano-以支持多种调度策略>3.1选用开源项目 Volcano 以支持多种调度策略</a></li><li><a href=#32-如何对接到我们的集群>3.2 如何对接到我们的集群</a></li></ul></li><li><a href=#四方案流程详细设计>四、方案流程详细设计</a><ul><li><a href=#41-流程主要分为三大部分-具体图示见-32>4.1 流程主要分为三大部分 （具体图示见 3.2）</a></li><li><a href=#42-该方案具体需要完成工作>4.2 该方案具体需要完成工作</a></li></ul></li><li><a href=#五api-接口设计参考>五、API 接口设计/参考</a><ul><li><a href=#51-volcanobackendhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisoperatorv1volcanobackend>5.1 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackend>VolcanoBackend</a></a></li><li><a href=#52-jobhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisbatchv1alpha1job>5.2 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/batch/v1alpha1/#Job>Job</a></a></li><li><a href=#53-commandhttp10253112156060pkgvolcanoshapispkgapisbusv1alpha1command>5.3 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/bus/v1alpha1/#Command>Command</a></a></li><li><a href=#54-numatopologyhttp10253112156060pkgvolcanoshapispkgapisnodeinfov1alpha1numatopology>5.4 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#Numatopology>Numatopology</a></a></li><li><a href=#55-queuehttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1queue>5.5 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#Queue>Queue</a></a></li><li><a href=#56-podgrouphttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1podgroup>5.6 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroup>PodGroup</a></a></li></ul></li><li><a href=#参考资料>*、参考资料</a></li></ul></nav></div></div><div class=content id=content><h2 id=一需求背景 class=headerLink><a href=#%e4%b8%80%e9%9c%80%e6%b1%82%e8%83%8c%e6%99%af class=header-mark></a>一、需求背景</h2><h3 id=11-提出问题 class=headerLink><a href=#11-%e6%8f%90%e5%87%ba%e9%97%ae%e9%a2%98 class=header-mark></a>1.1 提出问题</h3><p>目前越来越多的应用往 Kubernetes 上迁移，包括需要进行大量计算的人工智能、机器学习，而想要以原生的 Kubernetes 来运行这些任务，在调度策略上并不能完全满足，存在以下问题：</p><ol><li>多个 TFJob 同时提交产生的<strong>资源竞争</strong>可能导致<strong>死锁</strong>，多个任务都无法完成</li><li>单个大资源任务长期抢占或者不合理分配资源，导致小任务无法获得资源</li><li>同一个任务中需要频繁交流的几个子任务分布到了不同节点，导致训练效率低下</li><li>&mldr;</li></ol><h3 id=12-问题场景举例 class=headerLink><a href=#12-%e9%97%ae%e9%a2%98%e5%9c%ba%e6%99%af%e4%b8%be%e4%be%8b class=header-mark></a>1.2 问题场景举例</h3><ol><li><p>多个 TFJob 同时作业导致死锁的场景</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516150933.png title=/images/posts/Pasted%20image%2020230516150933.png data-thumbnail=/images/posts/Pasted%20image%2020230516150933.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516150933.png srcset="/images/posts/Pasted%20image%2020230516150933.png, /images/posts/Pasted%20image%2020230516150933.png 1.5x, /images/posts/Pasted%20image%2020230516150933.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516150933.png></a></figure></p><p>TFJob1 与 TFJob2 均需要 4 个 GPU 资源，需要其四个子任务 Pod 同时运行才能开始作业，如果 TFJob1 与 TFJob2 同时提交，各自只有两个 Pod 获取到了 GPU 资源，便出现互相等待对方释放资源的情况，形成死锁，无法完成作业，也造成了 GPU 资源的浪费</p></li><li><p>Kubernetes 默认调度策略下，产生较多碎片资源的场景</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516150945.png title=/images/posts/Pasted%20image%2020230516150945.png data-thumbnail=/images/posts/Pasted%20image%2020230516150945.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516150945.png srcset="/images/posts/Pasted%20image%2020230516150945.png, /images/posts/Pasted%20image%2020230516150945.png 1.5x, /images/posts/Pasted%20image%2020230516150945.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516150945.png></a></figure></p><p>Kubernetes 默认使用的 LeastRequestedPriority 优先级策略会将 Pod 优先调度到消耗资源少的节点上，让各节点的资源使用率尽量均匀，但这样容易产生碎片，如上图所示，在集群的角度，还可以提供 2 个 GPU 资源，但无法调度一个需要 2 GPU 资源的 Pod</p></li><li><p>&mldr;</p></li></ol><h3 id=13-需求 class=headerLink><a href=#13-%e9%9c%80%e6%b1%82 class=header-mark></a>1.3 需求</h3><blockquote><p><a href="https://wiki.cestc.cn/pages/viewpage.action?pageId=190216766" target=_blank rel="noopener noreferrer">https://wiki.cestc.cn/pages/viewpage.action?pageId=190216766</a></p></blockquote><p>至少需要支持以下两种调度策略：</p><ul><li><p><strong>Gang Scheduling</strong></p><p>作业的所有子任务都能满足资源需求才整体分配，否则不分配任务资源。避免由于资源死锁，导致大作业挤占小作业</p></li><li><p><strong>Binpack Scheduling</strong></p><p>作业优先集中分配在某个节点，当节点资源不足时，依次在下一节点集中分配，适合单机多卡训练任务，避免跨机数据传输，防止资源碎片</p></li></ul><h2 id=二友商方案对比 class=headerLink><a href=#%e4%ba%8c%e5%8f%8b%e5%95%86%e6%96%b9%e6%a1%88%e5%af%b9%e6%af%94 class=header-mark></a>二、*友商方案对比</h2><h3 id=21-kubernetes-scheduler-扩展方式简单对比 class=headerLink><a href=#21-kubernetes-scheduler-%e6%89%a9%e5%b1%95%e6%96%b9%e5%bc%8f%e7%ae%80%e5%8d%95%e5%af%b9%e6%af%94 class=header-mark></a>2.1 Kubernetes Scheduler 扩展方式简单对比</h3><table><thead><tr><th>扩展调度的方式</th><th>特点</th><th>缺点</th></tr></thead><tbody><tr><td>Scheduler Extender</td><td>支持 Filter、Preempt、Prioritize、Bind 的扩展；<br>首先执行 Kubernetes 内置的调度策略，通过 http 调用 Extender 注册的 webhook 运行扩展逻辑，影响调度结果</td><td>使用 http 请求获取自定义的调度结果，<font color=red>受网络影响，性能不及本地函数调用</font>；<br>扩展点有限，<font color=red>较不灵活</font>；<br><font color=red>必须执行完 Kubernetes 默认的 Filter 策略</font>后才调用自定义的策略</td></tr><tr><td>Multiple schedulers</td><td>调度性能强于 Scheduler Extender<br>可扩展性强</td><td>与默认调度器同时部署会导致<font color=red>资源冲突</font><br><font color=red>研发、维护成本较高</font></td></tr><tr><td>Scheduling Framework</td><td>Kubernetes 调度器的可插拔架构</td><td></td></tr></tbody></table><ul><li><p>Scheduler Extender</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151003.png title=/images/posts/Pasted%20image%2020230516151003.png data-thumbnail=/images/posts/Pasted%20image%2020230516151003.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151003.png srcset="/images/posts/Pasted%20image%2020230516151003.png, /images/posts/Pasted%20image%2020230516151003.png 1.5x, /images/posts/Pasted%20image%2020230516151003.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151003.png></a></figure></p></li><li><p>Multiple Schedulers</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151015.png title=/images/posts/Pasted%20image%2020230516151015.png data-thumbnail=/images/posts/Pasted%20image%2020230516151015.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151015.png srcset="/images/posts/Pasted%20image%2020230516151015.png, /images/posts/Pasted%20image%2020230516151015.png 1.5x, /images/posts/Pasted%20image%2020230516151015.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151015.png></a></figure></p></li><li><p>Scheduling Framework</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151026.png title=/images/posts/Pasted%20image%2020230516151026.png data-thumbnail=/images/posts/Pasted%20image%2020230516151026.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151026.png srcset="/images/posts/Pasted%20image%2020230516151026.png, /images/posts/Pasted%20image%2020230516151026.png 1.5x, /images/posts/Pasted%20image%2020230516151026.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151026.png></a></figure></p></li></ul><h3 id=22-友商已有解决方案对比 class=headerLink><a href=#22-%e5%8f%8b%e5%95%86%e5%b7%b2%e6%9c%89%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%e5%af%b9%e6%af%94 class=header-mark></a>2.2 友商已有解决方案对比</h3><h4 id=221-华为云---volcano class=headerLink><a href=#221-%e5%8d%8e%e4%b8%ba%e4%ba%91---volcano class=header-mark></a>2.2.1 华为云 - Volcano</h4><blockquote><p><a href=https://volcano.sh/zh/ target=_blank rel="noopener noreferrer">https://volcano.sh/zh/</a></p></blockquote><p>Volcano是<a href=https://www.cncf.io/ target=_blank rel="noopener noreferrer">CNCF</a> 下首个也是唯一的基于Kubernetes的容器批量计算平台，主要用于<strong>高性能计算场景</strong>。它提供了Kubernetes目前缺 少的一套机制，这些机制通常是<strong>机器学习大数据应用、科学计算、特效渲染等</strong>多种高性能工作负载所需的。作为一个通用批处理平台，<strong>Volcano与几乎所有的主流计算框 架无缝对接</strong>，如<a href=https://spark.apache.org/ target=_blank rel="noopener noreferrer">Spark</a> 、<a href=https://tensorflow.google.cn/ target=_blank rel="noopener noreferrer">TensorFlow</a> 、<a href=https://pytorch.org/ target=_blank rel="noopener noreferrer">PyTorch</a> 、 <a href=https://flink.apache.org/ target=_blank rel="noopener noreferrer">Flink</a> 、<a href=https://argoproj.github.io/ target=_blank rel="noopener noreferrer">Argo</a> 、<a href=https://www.mindspore.cn/ target=_blank rel="noopener noreferrer">MindSpore</a> 、 <a href=https://www.paddlepaddle.org.cn/ target=_blank rel="noopener noreferrer">PaddlePaddle</a> 等。它还提供了包括基于各种主流架构的CPU、GPU在内的异构设备混合调度能力。Volcano的设计 理念建立在15年来多种系统和平台大规模运行各种高性能工作负载的使用经验之上，并结合来自开源社区的最佳思想和实践。(<a href=https://volcano.sh/zh/docs/#%E7%AE%80%E4%BB%8B target=_blank rel="noopener noreferrer">https://volcano.sh/zh/docs/#%E7%AE%80%E4%BB%8B</a>)</p><p>支持的<strong>调度策略</strong>：</p><ul><li>Gang-scheduling</li><li>Binpack-scheduling</li><li>Fair-share scheduling</li><li>Queue scheduling</li><li>Preemption scheduling</li><li>Topology-based scheduling</li><li>Reclaims</li><li>Backfill</li><li>Resource Reservation</li><li>(Volcano支持用户自定义plugin和action以支持更多调度算法)</li></ul><p>支持的<strong>计算框架</strong>：</p><ul><li>TensoFlow</li><li>Pytorch</li><li>MindSpore</li><li>PaddlePaddle</li><li>Spark</li><li>Flink</li><li>OpenMPI</li><li>Horovod</li><li>MXNet</li><li>Kubeflow</li><li>Argo</li><li>KubeGene</li></ul><h4 id=222-阿里云方案 class=headerLink><a href=#222-%e9%98%bf%e9%87%8c%e4%ba%91%e6%96%b9%e6%a1%88 class=header-mark></a>2.2.2 阿里云方案</h4><ul><li><a href=https://help.aliyun.com/document_detail/178169.html target=_blank rel="noopener noreferrer">阿里云 Gang scheduling</a></li><li><a href=https://help.aliyun.com/document_detail/213695.html target=_blank rel="noopener noreferrer">阿里云 Capacity Scheduling</a></li></ul><p>只找到相关的一些实现思路、解决方案，没有已有的开源项目</p><h2 id=三整体方案架构组件架构 class=headerLink><a href=#%e4%b8%89%e6%95%b4%e4%bd%93%e6%96%b9%e6%a1%88%e6%9e%b6%e6%9e%84%e7%bb%84%e4%bb%b6%e6%9e%b6%e6%9e%84 class=header-mark></a>三、整体方案架构/组件架构</h2><h3 id=31选用开源项目-volcano-以支持多种调度策略 class=headerLink><a href=#31%e9%80%89%e7%94%a8%e5%bc%80%e6%ba%90%e9%a1%b9%e7%9b%ae-volcano-%e4%bb%a5%e6%94%af%e6%8c%81%e5%a4%9a%e7%a7%8d%e8%b0%83%e5%ba%a6%e7%ad%96%e7%95%a5 class=header-mark></a>3.1选用开源项目 Volcano 以支持多种调度策略</h3><p>选用已有的，由华为<strong>开源</strong>的 Volcano 项目，<strong>满足我们的需求，提供了丰富的调度策略与 Job 控制能力。Volcano 与 Kubernetes 天然兼容</strong>，其系统架构如下图所示：</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151048.png title=/images/posts/Pasted%20image%2020230516151048.png data-thumbnail=/images/posts/Pasted%20image%2020230516151048.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151048.png srcset="/images/posts/Pasted%20image%2020230516151048.png, /images/posts/Pasted%20image%2020230516151048.png 1.5x, /images/posts/Pasted%20image%2020230516151048.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151048.png></a></figure></p><p>Volcano 主要由 Scheduler、ControllerManager、Admission 组成：</p><ul><li><p><strong>Scheduler</strong>：通过一些列 action、plugin 调度 Job，为其找到最合适的节点，与 Kubernetes default-scheduler 相比，Volcano 支持 Job 的多种调度算法</p><ul><li>action：定义了调度各环节中执行的动作</li><li>plugin：根据不同的场景提供了 action 中算法的具体细节</li></ul><blockquote><p>scheduler 具体工作流程：https://volcano.sh/zh/docs/schduler_introduction/#%E5%B7%A5%E4%BD%9C%E6%B5%81</p></blockquote></li><li><p><strong>ControllerManager</strong>：管理 CRD 资源的生命周期。主要由 Queue CM、PodGroup CM、VCJob CM 组成</p></li><li><p><strong>Admission</strong>：负责对 CRD API 资源进行校验</p></li></ul><h3 id=32-如何对接到我们的集群 class=headerLink><a href=#32-%e5%a6%82%e4%bd%95%e5%af%b9%e6%8e%a5%e5%88%b0%e6%88%91%e4%bb%ac%e7%9a%84%e9%9b%86%e7%be%a4 class=header-mark></a>3.2 如何对接到我们的集群</h3><p>通过 <strong>Application Operator</strong> 的形式，用户在 OperatorHub 界面通过安装 <strong>volcano-operator</strong>，将 Volcano 的相关资源安装到集群中：</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151135.png title=/images/posts/Pasted%20image%2020230516151135.png data-thumbnail=/images/posts/Pasted%20image%2020230516151135.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151135.png srcset="/images/posts/Pasted%20image%2020230516151135.png, /images/posts/Pasted%20image%2020230516151135.png 1.5x, /images/posts/Pasted%20image%2020230516151135.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151135.png></a></figure></p><h2 id=四方案流程详细设计 class=headerLink><a href=#%e5%9b%9b%e6%96%b9%e6%a1%88%e6%b5%81%e7%a8%8b%e8%af%a6%e7%bb%86%e8%ae%be%e8%ae%a1 class=header-mark></a>四、方案流程详细设计</h2><h3 id=41-流程主要分为三大部分-具体图示见-32 class=headerLink><a href=#41-%e6%b5%81%e7%a8%8b%e4%b8%bb%e8%a6%81%e5%88%86%e4%b8%ba%e4%b8%89%e5%a4%a7%e9%83%a8%e5%88%86-%e5%85%b7%e4%bd%93%e5%9b%be%e7%a4%ba%e8%a7%81-32 class=header-mark></a>4.1 流程主要分为三大部分 （具体图示见 3.2）</h3><ul><li>volcano 的<strong>安装</strong>：由 volcano-operator 来完成 volcano 所需资源的安装</li><li>volcano 的<strong>使用</strong><ul><li>通过 volcano-operator 在界面上提供 volcano APIs 的操作入口</li><li>对于具体调度逻辑的验证</li></ul></li><li>volcano 的<strong>卸载</strong><ul><li>删除用于触发创建 volcano 资源的 VolcanoBackend CR 实例，触发 volcano-operator 完成 volcano 相关资源的卸载</li><li>卸载 volcano-operator</li></ul></li></ul><h3 id=42-该方案具体需要完成工作 class=headerLink><a href=#42-%e8%af%a5%e6%96%b9%e6%a1%88%e5%85%b7%e4%bd%93%e9%9c%80%e8%a6%81%e5%ae%8c%e6%88%90%e5%b7%a5%e4%bd%9c class=header-mark></a>4.2 该方案具体需要完成工作</h3><table><thead><tr><th>任务项</th><th>todo</th></tr></thead><tbody><tr><td>调度逻辑支持</td><td>使用 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 开源项目（huawei）</td></tr><tr><td>volcano 资源安装、卸载</td><td>volcano-operator 开发</td></tr><tr><td>组件 e2e</td><td>新增特性，ceake-origin 需新增对应的测试例<br>需具体了解 volcano 项目相关特性，完成测试例开发</td></tr></tbody></table><h2 id=五api-接口设计参考 class=headerLink><a href=#%e4%ba%94api-%e6%8e%a5%e5%8f%a3%e8%ae%be%e8%ae%a1%e5%8f%82%e8%80%83 class=header-mark></a>五、API 接口设计/参考</h2><p>目前 volcano-operator 提供的 api 主要是 1 个自身的 API + volcano 项目提供的 5 个 API 共 6 个 API</p><p><figure><a class=lightgallery href=/images/posts/Pasted%20image%2020230516151157.png title=/images/posts/Pasted%20image%2020230516151157.png data-thumbnail=/images/posts/Pasted%20image%2020230516151157.png><img loading=lazy src=/images/posts/Pasted%20image%2020230516151157.png srcset="/images/posts/Pasted%20image%2020230516151157.png, /images/posts/Pasted%20image%2020230516151157.png 1.5x, /images/posts/Pasted%20image%2020230516151157.png 2x" sizes=auto alt=/images/posts/Pasted%20image%2020230516151157.png></a></figure></p><h3 id=51-volcanobackendhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisoperatorv1volcanobackend class=headerLink><a href=#51-volcanobackendhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisoperatorv1volcanobackend class=header-mark></a>5.1 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackend target=_blank rel="noopener noreferrer">VolcanoBackend</a></h3><blockquote><ul><li><p>VolcanoBackend 是 volcano-operator 本身提供的 api</p></li><li><p>volcano-operator 在安装的时候会自己创建一个默认的 VolcanoBackend 资源，位于<code>default</code>命名空间下，名称为<code>default</code>该资源主要有两个作用：</p><ul><li>触发 VolcanoBackendReconcile 逻辑，从而安装 volcano 的<a href rel>相关资源</a></li><li>卸载 volcano-operator 之前需要删除该默认资源，卸载 volcano 的相关资源</li></ul></li><li><p>用户无需创建该资源</p></li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Spec</td><td><a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackendSpec target=_blank rel="noopener noreferrer">VolcanoBackendSpec</a></td><td></td></tr><tr><td>Status</td><td><a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackendStatus target=_blank rel="noopener noreferrer">VolcanoBackendStatus</a></td><td></td></tr></tbody></table><p><a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/operator/v1/#VolcanoBackendSpec target=_blank rel="noopener noreferrer">VolcanoBackendSpec</a>:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Description</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>可选的描述字段</td></tr></tbody></table><p><code>e.g.</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>operator.volcano.sh/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>VolcanoBackend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>finalizers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>operator.volcano.sh/finalizer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description: &#39;func</span><span class=p>:</span><span class=w> </span><span class=l>triggering volcano resources creation&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=52-jobhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisbatchv1alpha1job class=headerLink><a href=#52-jobhttp10253112156060pkgcodecestccnccosceavolcano-operatorapisbatchv1alpha1job class=header-mark></a>5.2 <a href=http://10.253.11.215:6060/pkg/code.cestc.cn/ccos/cea/volcano-operator/apis/batch/v1alpha1/#Job target=_blank rel="noopener noreferrer">Job</a></h3><blockquote><ul><li>Job 是 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 项目提供的 API，通过 OperatorHub 中的 volcano-operator 给用户提供界面上的操作入口</li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Spec</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#JobSpec target=_blank rel="noopener noreferrer">vcv1alpha1.JobSpec</a></td><td>Specification of the desired behavior of the volcano job, including the minAvailable</td></tr><tr><td>Status</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#JobStatus target=_blank rel="noopener noreferrer">vcv1alpha1.JobStatus</a></td><td>Current status of the volcano Job</td></tr></tbody></table><p><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#JobSpec target=_blank rel="noopener noreferrer">vcv1alpha1.JobSpec</a>:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>SchedulerName</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>SchedulerName is the default value of <code>tasks.template.spec.schedulerName</code>.</td></tr><tr><td>MinAvailable</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>The minimal available pods to run for this Job<br>Defaults to the summary of tasks&rsquo; replicas</td></tr><tr><td>Volumes</td><td>[] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#VolumeSpec target=_blank rel="noopener noreferrer">VolumeSpec</a></td><td>The volumes mount on Job</td></tr><tr><td>Tasks</td><td>[] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#TaskSpec target=_blank rel="noopener noreferrer">TaskSpec</a></td><td>Tasks specifies the task specification of Job</td></tr><tr><td>Policies</td><td>[] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/batch/v1alpha1/#LifecyclePolicy target=_blank rel="noopener noreferrer">LifecyclePolicy</a></td><td>Specifies the default lifecycle of tasks</td></tr><tr><td>Plugins</td><td>map [string] []string</td><td>Specifies the plugin of job<br>Key is plugin name, value is the arguments of the plugin</td></tr><tr><td>RunningEstimate</td><td>*<a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#Duration target=_blank rel="noopener noreferrer">metav1.Duration</a></td><td>Running Estimate is a user running duration estimate for the job<br>Default to nil</td></tr><tr><td>Queue</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Specifies the queue that will be used in the scheduler, &ldquo;default&rdquo; queue is used this leaves empty.</td></tr><tr><td>MaxRetry</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>Specifies the maximum number of retries before marking this Job failed.<br>Defaults to 3.</td></tr><tr><td>TTLSecondsAfterFinished</td><td>*<a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>ttlSecondsAfterFinished limits the lifetime of a Job that has finished execution (either Completed or Failed). If this field is set, ttlSecondsAfterFinished after the Job finishes, it is eligible to be automatically deleted. If this field is unset, the Job won&rsquo;t be automatically deleted. If this field is set to zero, the Job becomes eligible to be deleted immediately after it finishes.</td></tr><tr><td>PriorityClassName</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>If specified, indicates the job&rsquo;s priority.</td></tr><tr><td>MinSuccess</td><td>*<a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>The minimal success pods to run for this Job<br>Minimum=1</td></tr></tbody></table><p><code>e.g.</code> // TODO</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml></code></pre></td></tr></table></div></div><h3 id=53-commandhttp10253112156060pkgvolcanoshapispkgapisbusv1alpha1command class=headerLink><a href=#53-commandhttp10253112156060pkgvolcanoshapispkgapisbusv1alpha1command class=header-mark></a>5.3 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/bus/v1alpha1/#Command target=_blank rel="noopener noreferrer">Command</a></h3><blockquote><ul><li>Command 是 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 项目提供的 API，通过 OperatorHub 中的 volcano-operator 给用户提供界面上的操作入口</li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Action</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Action defines the action that will be took to the target object.</td></tr><tr><td>TargetObject</td><td>*<a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#OwnerReference target=_blank rel="noopener noreferrer">metav1.OwnerReference</a></td><td>TargetObject defines the target object of this command.</td></tr><tr><td>Reason</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Unique, one-word, CamelCase reason for this command.</td></tr><tr><td>Message</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Human-readable message indicating details of this command.</td></tr></tbody></table><p><code>e.g.</code> // TODO</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml></code></pre></td></tr></table></div></div><h3 id=54-numatopologyhttp10253112156060pkgvolcanoshapispkgapisnodeinfov1alpha1numatopology class=headerLink><a href=#54-numatopologyhttp10253112156060pkgvolcanoshapispkgapisnodeinfov1alpha1numatopology class=header-mark></a>5.4 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#Numatopology target=_blank rel="noopener noreferrer">Numatopology</a></h3><blockquote><ul><li>Numatopology 是 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 项目提供的 API，通过 OperatorHub 中的 volcano-operator 给用户提供界面上的操作入口</li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Spec</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#NumatopoSpec target=_blank rel="noopener noreferrer">NumatopoSpec</a></td><td>Specification of the numa information of the worker node</td></tr></tbody></table><p><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#NumatopoSpec target=_blank rel="noopener noreferrer">NumatopoSpec</a>:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Policies</td><td>map[ <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#PolicyName target=_blank rel="noopener noreferrer">PolicyName</a> ] <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Specifies the policy of the manager</td></tr><tr><td>ResReserved</td><td>map[ <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a> ] <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Specifies the reserved resource of the node<br>Key is resource name</td></tr><tr><td>NumaResMap</td><td>map[ <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a> ] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#ResourceInfo target=_blank rel="noopener noreferrer">ResourceInfo</a></td><td>Specifies the numa info for the resource<br>Key is resource name</td></tr><tr><td>CPUDetail</td><td>map[ <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a> ] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/nodeinfo/v1alpha1/#CPUInfo target=_blank rel="noopener noreferrer">CPUInfo</a></td><td>Specifies the cpu topology info<br>Key is cpu id</td></tr></tbody></table><p><code>e.g.</code> // TODO</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml></code></pre></td></tr></table></div></div><h3 id=55-queuehttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1queue class=headerLink><a href=#55-queuehttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1queue class=header-mark></a>5.5 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#Queue target=_blank rel="noopener noreferrer">Queue</a></h3><blockquote><ul><li>Queue 是 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 项目提供的 API，通过 OperatorHub 中的 volcano-operator 给用户提供界面上的操作入口</li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Spec</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#QueueSpec target=_blank rel="noopener noreferrer">QueueSpec</a></td><td>Specification of the desired behavior of the queue.<br>More info: <a href=https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status target=_blank rel="noopener noreferrer">https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status</a></td></tr><tr><td>Status</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#QueueStatus target=_blank rel="noopener noreferrer">QueueStatus</a></td><td>The status of queue.</td></tr></tbody></table><p><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#QueueSpec target=_blank rel="noopener noreferrer">QueueSpec</a>:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Weight</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td></td></tr><tr><td>Capability</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/api/core/v1/#ResourceList target=_blank rel="noopener noreferrer">v1.ResourceList</a></td><td></td></tr><tr><td>Reclaimable</td><td>*<a href=http://10.253.11.215:6060/pkg/builtin/#bool target=_blank rel="noopener noreferrer">bool</a></td><td>Reclaimable indicate whether the queue can be reclaimed by other queue</td></tr><tr><td>ExtendClusters</td><td>[] <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#Cluster target=_blank rel="noopener noreferrer">Cluster</a></td><td>extendCluster indicate the jobs in this Queue will be dispatched to these clusters.</td></tr><tr><td>Guarantee</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#Guarantee target=_blank rel="noopener noreferrer">Guarantee</a></td><td>Guarantee indicate configuration about resource reservation</td></tr></tbody></table><p><code>e.g.</code> // TODO</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml></code></pre></td></tr></table></div></div><h3 id=56-podgrouphttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1podgroup class=headerLink><a href=#56-podgrouphttp10253112156060pkgvolcanoshapispkgapisschedulingv1beta1podgroup class=header-mark></a>5.6 <a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroup target=_blank rel="noopener noreferrer">PodGroup</a></h3><blockquote><ul><li>PodGroup 是 <a href=https://github.com/volcano-sh/volcano target=_blank rel="noopener noreferrer">volcano</a> 项目提供的 API，通过 OperatorHub 中的 volcano-operator 给用户提供界面上的操作入口</li></ul></blockquote><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>metav1.TypeMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#TypeMeta target=_blank rel="noopener noreferrer">metav1.TypeMeta</a></td><td></td></tr><tr><td>metav1.ObjectMeta</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/apimachinery/pkg/apis/meta/v1/#ObjectMeta target=_blank rel="noopener noreferrer">metav1.ObjectMeta</a></td><td></td></tr><tr><td>Spec</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroupSpec target=_blank rel="noopener noreferrer">PodGroupSpec</a></td><td>Specification of the desired behavior of the pod group.<br>More info: <a href=https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status target=_blank rel="noopener noreferrer">https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status</a></td></tr><tr><td>Status</td><td><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroupStatus target=_blank rel="noopener noreferrer">PodGroupStatus</a></td><td>Status represents the current information about a pod group.<br>This data may not be up to date.</td></tr></tbody></table><p><a href=http://10.253.11.215:6060/pkg/volcano.sh/apis/pkg/apis/scheduling/v1beta1/#PodGroupSpec target=_blank rel="noopener noreferrer">PodGroupSpec</a>:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>MinMember</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>MinMember defines the minimal number of members/tasks to run the pod group;<br>if there&rsquo;s not enough resources to start all tasks, the scheduler will not start anyone.</td></tr><tr><td>MinTaskMember</td><td>map[ <a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a> ] <a href=http://10.253.11.215:6060/pkg/builtin/#int32 target=_blank rel="noopener noreferrer">int32</a></td><td>MinTaskMember defines the minimal number of pods to run each task in the pod group;<br>if there&rsquo;s not enough resources to start each task, the scheduler will not start anyone.</td></tr><tr><td>Queue</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>Queue defines the queue to allocate resource for PodGroup; if queue does not exist, the PodGroup will not be scheduled. Defaults to <code>default</code> Queue with the lowest weight.</td></tr><tr><td>PriorityClassName</td><td><a href=http://10.253.11.215:6060/pkg/builtin/#string target=_blank rel="noopener noreferrer">string</a></td><td>If specified, indicates the PodGroup&rsquo;s priority. &ldquo;system-node-critical&rdquo; and &ldquo;system-cluster-critical&rdquo; are two special keywords which indicate the highest priorities with the former being the highest priority. Any other name must be defined by creating a PriorityClass object with that name. If not specified, the PodGroup priority will be default or zero if there is no</td></tr><tr><td>MinResources</td><td><a href=http://10.253.11.215:6060/pkg/k8s.io/api/core/v1/#ResourceList target=_blank rel="noopener noreferrer">v1.ResourceList</a></td><td>MinResources defines the minimal resource of members/tasks to run the pod group; if there&rsquo;s not enough resources to start all tasks, the scheduler will not start anyone.</td></tr></tbody></table><p><code>e.g.</code> // TODO</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml></code></pre></td></tr></table></div></div><h2 id=参考资料 class=headerLink><a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 class=header-mark></a>*、参考资料</h2><ol><li><a href=https://www.6aiq.com/article/1628641646793 target=_blank rel="noopener noreferrer">https://www.6aiq.com/article/1628641646793</a></li><li><a href=https://support.huaweicloud.com/bestpractice-cce/cce_bestpractice_0075.html#section1 target=_blank rel="noopener noreferrer">https://support.huaweicloud.com/bestpractice-cce/cce_bestpractice_0075.html#section1</a></li><li><a href=https://volcano.sh/ target=_blank rel="noopener noreferrer">https://volcano.sh/</a></li><li><a href=https://developer.aliyun.com/article/766998 target=_blank rel="noopener noreferrer">https://developer.aliyun.com/article/766998</a></li><li><a href=https://www.cncf.io/wp-content/uploads/2020/08/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E5%A6%82%E4%BD%95%E6%89%A9%E5%B1%95Kubernetes-%E8%B0%83%E5%BA%A6%E5%99%A8%E6%94%AF%E6%8C%81-AI-%E5%92%8C%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%BD%9C%E4%B8%9A%EF%BC%9F1-xi-jiang.pdf target=_blank rel="noopener noreferrer">https://www.cncf.io/wp-content/uploads/2020/08/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E5%A6%82%E4%BD%95%E6%89%A9%E5%B1%95Kubernetes-%E8%B0%83%E5%BA%A6%E5%99%A8%E6%94%AF%E6%8C%81-AI-%E5%92%8C%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%BD%9C%E4%B8%9A%EF%BC%9F1-xi-jiang.pdf</a></li><li><a href=https://github.com/kubernetes-sigs/scheduler-plugins/blob/master/kep/9-capacity-scheduling/README.md target=_blank rel="noopener noreferrer">https://github.com/kubernetes-sigs/scheduler-plugins/blob/master/kep/9-capacity-scheduling/README.md</a></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2023-05-16</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/index.md target=_blank rel="noopener noreferrer">阅读原始文档</a></span></div><div class=post-info-share><span><a href=# title="分享到 Twitter" data-sharer=twitter data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案 data-via=xxxx><i class="fab fa-twitter fa-fw"></i></a><a href=# title="分享到 Facebook" data-sharer=facebook data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/><i class="fab fa-facebook-square fa-fw"></i></a><a href=# title="分享到 WhatsApp" data-sharer=whatsapp data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案 data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=# title="分享到 Line" data-sharer=line data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=# title="分享到 微博" data-sharer=weibo data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案><i class="fab fa-weibo fa-fw"></i></a><a href=# title="分享到 Myspace" data-sharer=myspace data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案 data-description><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=# title="分享到 Blogger" data-sharer=blogger data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案 data-description><i class="fab fa-blogger fa-fw"></i></a><a href=# title="分享到 Evernote" data-sharer=evernote data-url=http://www.honghuiqiang.com/202305161508-%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97-%E6%94%AF%E6%8C%81%E4%BD%9C%E4%B8%9A%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E6%96%B9%E6%A1%88/ data-title=高性能计算-支持作业高级调度策略方案><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/202305161521-%E8%AE%A1%E7%AE%97%E8%8A%82%E7%82%B9%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5%E6%96%B9%E6%A1%88/ class=prev rel=prev title=计算节点健康检查方案><i class="fas fa-angle-left fa-fw"></i>计算节点健康检查方案</a>
<a href=/202305161550-iscsi-%E7%A3%81%E7%9B%98%E5%8D%B8%E8%BD%BD%E6%9C%89%E6%AE%8B%E7%95%99%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90/ class=next rel=next title="iSCSI 磁盘卸载有残留的原因分析">iSCSI 磁盘卸载有残留的原因分析<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/>giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.105.0">Hugo</a> 强力驱动&nbsp;|&nbsp;托管在 <a title="Github Pages" href=https://docs.github.com/en/pages/ target=_blank rel="noopener noreffer">GitHub Pages</a> 上&nbsp;|&nbsp;主题 - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.3.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">索隆不喝酒</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{giscus:{darkTheme:"dark",dataCategory:"General",dataCategoryId:"DIC_kwDOJh9DwM4CWbTD",dataEmitMetadata:"0",dataInputPosition:"bottom",dataLang:"zh-CN",dataMapping:"pathname",dataReactionsEnabled:"1",dataRepo:"904566722/hugo-giscus-common-system",dataRepoId:"R_kgDOJh9DwA",dataStrict:"0",lightTheme:"light"}},data:{"desktop-header-typeit":"HHQ Records","mobile-header-typeit":"HHQ Records"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/giscus.min.js defer></script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GKX5LKE0Z8",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-GKX5LKE0Z8" async></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?7ee459037c39c6123ff6e6252a7c5301",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></div></body></html>
import{_ as o,c as i,a as t,b as n,d as a,e as l,r as p,o as r}from"./app-BDAgxtHV.js";const c={},d={href:"https://busybox.net/downloads/binaries/1.28.1-defconfig-multiarch/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://busybox.net/downloads/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/docker-library/busybox",target:"_blank",rel:"noopener noreferrer"},m={href:"https://blog.csdn.net/liumiaocn/article/details/80458663",target:"_blank",rel:"noopener noreferrer"},k={href:"https://www.frytea.com/technology/docker/build-a-docker-image-from-scratch/",target:"_blank",rel:"noopener noreferrer"};function v(h,s){const e=p("ExternalLinkIcon");return r(),i("div",null,[s[7]||(s[7]=t(`<h1 id="busybox-镜像制作" tabindex="-1"><a class="header-anchor" href="#busybox-镜像制作"><span>busybox 镜像制作</span></a></h1><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">mkdir</span> rootfs    </span>
<span class="line"><span class="token builtin class-name">cd</span> rootfs/</span>
<span class="line"><span class="token keyword">for</span> <span class="token for-or-select variable">module</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">\`</span>busybox --list-modules<span class="token variable">\`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$module</span>&quot;</span><span class="token variable">\`</span></span> <span class="token operator">&amp;&amp;</span> <span class="token function">ln</span> <span class="token parameter variable">-sf</span> /bin/busybox <span class="token string">&quot;<span class="token variable">$module</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">done</span></span>
<span class="line"><span class="token function">cp</span> busybox bin/</span>
<span class="line"><span class="token function">tar</span> cpf rootfs.tar <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> busybox.dockerfile</span></span>
<span class="line">FROM scratch</span>
<span class="line">ADD rootfs.tar /</span>
<span class="line">CMD [&quot;/bin/sh&quot;]</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="arm-架构" tabindex="-1"><a class="header-anchor" href="#arm-架构"><span>arm 架构</span></a></h2><ol><li>直接下载二进制文件</li></ol>`,5)),n("p",null,[n("a",d,[s[0]||(s[0]=a("https://busybox.net/downloads/binaries/1.28.1-defconfig-multiarch/")),l(e)])]),s[8]||(s[8]=t(`<ol start="2"><li>制作 tar 包</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">cp</span> busybox /bin/busybox</span>
<span class="line"><span class="token function">mkdir</span> rootfs</span>
<span class="line"><span class="token builtin class-name">cd</span> rootfs/</span>
<span class="line"><span class="token keyword">for</span> <span class="token for-or-select variable">module</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">\`</span>busybox --list-modules<span class="token variable">\`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$module</span>&quot;</span><span class="token variable">\`</span></span> <span class="token operator">&amp;&amp;</span> <span class="token function">ln</span> <span class="token parameter variable">-sf</span> /bin/busybox <span class="token string">&quot;<span class="token variable">$module</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">done</span></span>
<span class="line"><span class="token function">cp</span> /bin/busybox bin/busybox</span>
<span class="line"><span class="token function">tar</span> cpf rootfs.tar <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>制作镜像</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> busybox.dockerfile</span></span>
<span class="line">FROM scratch</span>
<span class="line">ADD rootfs.tar /</span>
<span class="line">CMD [&quot;/bin/sh&quot;]</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>`,5)),n("ol",null,[n("li",null,[n("p",null,[s[2]||(s[2]=a("代码网址：")),n("a",u,[s[1]||(s[1]=a("https://busybox.net/downloads/")),l(e)])])]),n("li",null,[n("p",null,[s[4]||(s[4]=a("github： ")),n("a",b,[s[3]||(s[3]=a("https://github.com/docker-library/busybox")),l(e)])])]),n("li",null,[n("p",null,[n("a",m,[s[5]||(s[5]=a("https://blog.csdn.net/liumiaocn/article/details/80458663")),l(e)])])]),n("li",null,[n("p",null,[n("a",k,[s[6]||(s[6]=a("https://www.frytea.com/technology/docker/build-a-docker-image-from-scratch/")),l(e)])])])])])}const g=o(c,[["render",v],["__file","busybox jingxiangzhizuo.html.vue"]]),y=JSON.parse('{"path":"/blogs/gongzuo/2025/busybox jingxiangzhizuo.html","title":"busybox 镜像制作","lang":"en-US","frontmatter":{"title":"busybox 镜像制作","date":"2025/02/12","tags":["busybox","Docker"],"categories":["工作"]},"headers":[{"level":2,"title":"命令","slug":"命令","link":"#命令","children":[]},{"level":2,"title":"arm 架构","slug":"arm-架构","link":"#arm-架构","children":[]}],"git":{"createdTime":1739425323000,"updatedTime":1739425323000,"contributors":[{"name":"洪惠强","email":"904566722@qq.com","commits":1}]},"filePathRelative":"blogs/工作/2025/busybox 镜像制作.md"}');export{g as comp,y as data};
